<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="style.css" type="text/css">
        <link rel="stylesheet" href="style2.css" type="text/css">
        <script src="https://code.jquery.com/jquery.js"></script>
         <link href="https://fonts.googleapis.com/css?family=Caesar+Dressing|Homemade+Apple|Iceland|Metamorphous|Nosifer|UnifrakturMaguntia|Zeyada" rel="stylesheet">
        <title>Crystals</title>
</head>
<body>
        <video autoplay muted loop id="myVideo">
                <source id="hellGate" src="assets2/hellgate.mp4" type="video/mp4">
              </video>

        <video autoplay muted loop id="myVideo2">
                <source id="fog" src="assets/smoke.mp4" type="video/mp4">
              </video>

        <video autoplay muted loop id="myVideo3">
                <source id="endWorld" src="assets2/skulls.mp4" type="video/mp4">
              </video>

    <div class="container">
        <div class="row">
            <div id="header" class="col-lg-12">
                <h1>Eldritch Investigators</h1>
                <h2 id="chapter">Chapter 2</h2>

            </div>
        </div>
    </div>
    
    <div id="instruct" class="container">
        <div class="row">
                <div id="instruct" class="col-md-12">
                        <p>The Ritual is finished, the Gate is open. You read in the priest's book about a machine
                            that collapses the walls between dimensions. Before you lay crystals strewn about the floor,
                            a strange machine, and the swirling vortex into the abyss. Insert crystals into the machine
                            to match the dimensional frequency of the Gate. It might just close it. 
                        </p>
                 </div>
    <div id="instruct" class="container">
        <div class="row">
                <div id="gameWon" class="col-lg-12">
                        <p>The gate has closed, and though small monstrosities from the abyss have escaped, the Elder
                            God that was summoned now can no longer gain access to our realm of existence. The children,
                            though confused, are safe. The cultists are now benign entities, powerless to sway control. Your 
                            job is not done, but, the world is safe. Millions of lives unknowingly attribute their existence
                            to your efforts. 
                        </p>
                        <a class="btn btn-dark btn-lg" href="interlude3.html">Hunt Down Escaped Demons</a>
                        <a class="btn btn-dark btn-lg" href="crystalGame.html">Re-Play Mission</a>
                    </div>
        </div>
        <div class="row">
                <div class="col-md-12" id="failure">
                    <div class="failure">You Failed</div>
                </div>
        </div>
        <div class="row">
                <div id="gameLost" class="col-md-6 col-md-offset-3">
                    
                        <p><img src="assets/cthulu.jpg " align="left" id="cthulu">Your efforts were useless in the face of such evil. The cultists were successful 
                            and have unleashed their benevolent, insane Gods unto your realm. Humanity's darkest hour is at hand. 
                        </p>
                        <a class="btn btn-dark btn-lg" href="index.html">Start Over Investigation</a>
                        <a class="btn btn-dark btn-lg" href="crystalGame.html">Re-Play Mission</a>
                    </div>
   
        </div>
                 
        </div>
        <div class="row">
            <div class="col-md-4">
                    <p id="frequency">Dimensional Frequency:<span id="targetNumber"></span></p>
            </div>
            <div class="col-md-4">
                    <p id="frequency">Crystal Input:<span id="crystalNumber"></span></p>
            </div>
            <div class="col-md-4">
                    <p id="frequency">Attempts:<span id="attempts"></span></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-5">
                <img id="machine" src="assets2/machine.jpg">
                
            </div>
            <div class="col-md-5" id="crystalBox">
                <img id="crystal1" src="assets2/red.jpg" class="crystal">
                <img id="crystal2" src="assets2/Bismuth.jpg" class="crystal">
                <img id="crystal3" src="assets2/green.jpg" class="crystal">
                <img id="crystal4" src="assets2/pinkcrystal.jpg" class="crystal">
            </div>
        </div>
    </div>
    
    <div class="footer">
            <div class="row">
                <div class="col-md-12">
                        <audio id="theme-music" src="assets2/Kraken.mp3" preload="auto">
                        </audio>
                        <audio id="crystalEntry" src="assets2/crystalinput.mp3" preload="auto">
                        </audio>
                        <audio id="creatureSnarl" src="assets2/snarl.mp3" preload="auto">
                        </audio>
                        <audio id="explosion" src="assets2/explosion.mp3" preload="auto">
                        </audio>
                        <audio id="fogSound" src="assets/background.mp3" preload="auto">
                        </audio>
                        <audio id="hellScape" src="assets2/hellScape.mp3" preload="auto">
                        </audio>
                       
                <!-- <audio controls id="player">
                        <source src="background.mp3" type="audio/mpeg">
                    </audio> -->
                    <button id="themeSong" class="btn btn-lg btn-dark" title="Play Song"><span class="fa fa-music"></span></button> 
                    <button id="themeSongStop" class="btn btn-lg btn-dark" title="Pause Song"><span class="fa fa-minus-circle"></span></button> 
                </div>
            </div>
        </div>
</body>
<script type="text/javascript">


$(document).ready(function () {
var snarl = document.getElementById("creatureSnarl");
var crystalInput = document.getElementById("crystalEntry");
var themeMusic = document.getElementById("theme-music");
document.getElementById("theme-music").loop = true;
var explosion = document.getElementById("explosion");
var fogMusic = document.getElementById("fogSound");
var hellSound = document.getElementById("hellScape");
document.getElementById("hellScape").loop = true;
var snarlPlaying = false;
var entryPlaying = false;
var explodePlaying = false;
var isPlaying = false;
var fireAudio = document.getElementById("fireAudio");
    
     $("#themeSong").on("click", function(){
   themeMusic.play();
}); 
     $("#themeSongStop").on("click", function(){
   themeMusic.pause();
}); 
var targetArray = [43, 45, 47, 53, 55]
var crystalArray = [3, 4, 5, 6, 7, 8, 9, 10]
var crystal1Value= crystalArray[Math.floor(Math.random() * crystalArray.length)];
var crystal2Value = crystalArray[Math.floor(Math.random() * crystalArray.length)];
var crystal3Value = crystalArray[Math.floor(Math.random() * crystalArray.length)];
var crystal4Value = crystalArray[Math.floor(Math.random() * crystalArray.length)];
var frequencyValue = targetArray[Math.floor(Math.random() * targetArray.length)];
var inputValue = 0;
var attempts = 0;

$("#targetNumber").append(frequencyValue);


function updateInput (num){
    inputValue = inputValue + num;
    console.log("this is the overall score" + inputValue);
    $("#crystalNumber").html(inputValue);

}
console.log(crystal1Value);
console.log(crystal2Value);
console.log(crystal3Value);
console.log(crystal4Value);


$("#crystal1").on("click", function (){
    updateInput(crystal1Value);
    Endgame(inputValue);
    loseGame(attempts);
    })
$("#crystal2").on("click", function (){
    updateInput(crystal2Value);
    Endgame(inputValue);
    loseGame(attempts);
    })

$("#crystal3").on("click", function (){
    updateInput(crystal3Value);
    Endgame(inputValue);
    loseGame(attempts);
    })

$("#crystal4").on("click", function (){
    updateInput(crystal4Value);
    Endgame(inputValue);
    loseGame(attempts);
    })

 function Endgame (num){
        if (frequencyValue === num){
            themeMusic.pause();
            explosion.play();
            $("#myVideo2").css("display", "block")
            $("#gameWon").css("display", "block")
            fogMusic.play();
        }
        if (frequencyValue < num){
            attempts++;
            $("#attempts").text(attempts);
            inputValue = 0;
            frequencyValue = targetArray[Math.floor(Math.random() * targetArray.length)];
        }
    }

function loseGame(num){
    if (num > 0){
        themeMusic.pause();
        hellSound.play();
        snarl.play();
        $("#myVideo3").css("display", "block");
        $("#gameLost").css("display", "block");
        $(".failure").css("display", "block");
        
    }
}

     $(".crystal").on("click", function(){
   crystalInput.play();
}); 



});
</script>
</html>